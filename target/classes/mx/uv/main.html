<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis pendientes</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <style>
    input::placeholder {
     color: white;
    }
    textarea::placeholder {
     color: white;
    }
  </style>
</head>
<body class="m-0 vh-100 row" onload='recuperarDatos()'>
    <!-- Left side -->
    <div class="col-sm-5 bg-warning">
        <h1 class="display-4"> Evenotes </h1>
        <h4> Ingresa aquí los datos para tu nuevo evento</h4>
        <div class="border rounded-lg border-dark p-2 m-3" style="font-family:Verdana, Geneva, Tahoma, sans-serif">
            <div class="container border border-dark rounded-lg bg-dark p-3 my-3">
                <h4 class="text-light">Contenido</h4>
                <form>
                    <input title="Ingresar título" type="text" class=" pl-2 form control w-100 mb-3 border border-dark" style="background-color: gray; color: white; border-radius: 4px;"  placeholder="Titulo" autocomplete="off" id="titulo" required;">
                    <textarea class="w-100 border border-dark pl-2" rows="3" id="descripcion" style="background-color: gray; color: white; border-radius: 4px;" placeholder="Descripción" required ></textarea>
                </form>
    
            </div>
            <div class="container border border-dark rounded-lg bg-dark p-3 my-3">
                <h4 class="text-light">Detalles</h4>
                <form>
                    <input title="Fecha" type="date" class="form control form-control-sm w-100 mb-3 border border-dark" style="background-color: gray; color: white; border-radius: 4px;" autocomplete="off" id="fecha" required;">
                    <label for="horaInicio" class="text-light">Inicia</label>
                    <input title="Hora inicio" type="time" class="form control form-control-sm w-25 mb-3 border border-dark ml-3 " style="background-color: gray; color: white; border-radius: 4px;" autocomplete="off" id="horaInicio" required;">
                    <div>
                        <label for="horaFin" class="text-light">Finaliza</label>
                    <input title="Hora Fin" type="time" class="form control form-control-sm w-25 mb-3 border border-dark" style="background-color: gray; color: white; border-radius: 4px;" autocomplete="off" id="horaFin" required;">
                    </div>
                    <textarea class="w-100 border border-dark pl-2" rows="2" id="lugar" style="background-color: gray; color: white; border-radius: 4px;" placeholder="Lugar" required ></textarea>
                    <label class="text-danger w-75" text="" id="estadoEv"></label>
                </form>
    
            </div>
            <div class=" row justify-content-center align-items-center col">
                <button type="button" onclick='newEvent()' class=" btn btn-secondary rounded-lg w-50 mt-2 text-center bg-dark border-warning text-light mb-1 p-0"  style="font-size: calc(0.5em + 0.8vw)" >Agregar evento</button>
            </div>
        </div>
    </div>
    <!-- Right side -->
    <div class="col-sm-7">
        <h1 class="display-4"> Mis eventos </h1>

        <div class="row row-striped border-light shadow-lg " id="tarjeta">
			<div class="col-2 text-right">
				<h1 class="display-4"><span class="badge badge-secondary">23</span></h1>
				<h4>OCTUBRE</h4>
			</div>
			<div class="col-10">
				<h3 class="text-uppercase"><strong>Ice Cream Social</strong></h3>
				<ul class="list-inline">
				    <li class="list-inline-item"><i class="fa fa-calendar-o" aria-hidden="true"></i> Monday</li>
					<li class="list-inline-item"><i class="fa fa-clock-O" aria-hidden="true"></i> 12:30 PM - 2:00 PM</li>
					<li class="list-inline-item"><i class="fa fa-location-arrow" aria-hidden="true"></i> Cafe</li>
				</ul>
				<p>Lorem ipsum dolsit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</div>

		</div>
    </div>
    <script>
        function newEvent(){
            const titulo= document.getElementById('titulo');
            const descripcion = document.getElementById('descripcion')
            const fecha= document.getElementById('fecha')
            const horaInicio=document.getElementById('horaInicio')
            const horaFin=document.getElementById('horaFin')
            const lugar=document.getElementById('lugar')
            const estadoEv=document.getElementById('estadoEv')
          
          if(titulo.value!="" & fecha.value!=""){
            axios({
              method:"POST",
              url: 'http://localhost:80/main',
              data:{
                  "titulo": titulo.value,
                  "descripcion": descripcion.value,
                  "fecha": fecha.value,
                  "horaInicio": horaInicio.value,
                  "horaFin": horaFin.value,
                  "lugar": lugar.value,
                  "usuario":"ñam"
              }
          }).then((res)=>{
              console.log(res);
              if(res.data=="Evento creado"){
                console.log(recuperarDatos());
              }else{
                estadoEv.innerHTML="Título de evento ya existente"
              }
          }).catch(error=>{
              console.log(error);
              throw new Error(error);
          });
          }else if(titulo.value=="" || fecha.value==""){
            estadoEv.innerHTML="Campos obligatorios vacios"
          }
       
        }

        function recuperarDatos(){
            axios({
              method:"GET",
              url: 'http://localhost:80/main',
          }).then((res)=>{
              console.log(res);
          }).catch(error=>{
              console.log(error);
              throw new Error(error);
          });
        }

    </script>
</body>
</html>